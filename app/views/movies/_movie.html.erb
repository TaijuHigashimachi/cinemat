<div class="swiper-slide js-touch-area-<%=  movie.id %>">
  <div class="js-movie-id-<%=  movie.id %> d-none"><%=  movie.id %></div>
  <div class="trailer">
    <iframe src="https://www.youtube.com/embed/<%= movie.trailer_url %>" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
  </div>
  <div class="text-start mt-3">
    <div class="h2">
      <%= movie.title %>
    </div>
    <div class="d-flex">
      <div class="me-4">
        <%= movie.release_date.to_s.slice(0, 4) + '年公開' %>
      </div>
      <div class="me-4">
        <%= movie.runtime + '分' %>
      </div>
      <div class="me-4 me-auto">
        <%= movie.genres[0]['name'] %>
        <%= movie.genres[1]['name'] %>
        <%= movie.genres[2]['name'] %>
      </div>
      <button type="button" data-bs-toggle="collapse" data-bs-target="#js-movie_detail_<%= movie.id %>" aria-expanded="false" aria-controls="#js-movie_detail_<%= movie.id %>" class="js-movie_detail_<%= movie.id %> movie_detail text-white">
        あらすじを見る<i class="fa fa-chevron-down"></i>
      </button>
    </div>
    <div class="collapse mt-3" id="js-movie_detail_<%= movie.id %>">
      <div class="card card-body text-start">
        <%= movie.overview %>
      </div>
    </div>
  </div>
  <hr>
  <div class="row text-center movie-status-icon m-1">
    <div class="col-4 border">
      <%= link_to movie_statuses_path(movie_id: movie.id, user_id: current_user.id, status: 'watch'), method: :post, local: true do %>
        <i class="fas fa-plus-circle text-white"></i>
      <% end %>
    </div>
    <div class="col-4 border">
      <%= link_to movie_statuses_path(movie_id: movie.id, user_id: current_user.id, status: 'watched'), method: :post, local: true do %>
        <i class="fas fa-check-circle text-white"></i>
      <% end %>
    </div>
    <div class="col-4 border">
      <%= link_to movie_statuses_path(movie_id: movie.id, user_id: current_user.id, status: 'uninterested'), method: :post, local: true do %>
        <i class="fas fa-minus-circle text-white"></i>
      <% end %>
    </div>
  </div>
</div>

<script>
  function pointerMove(){
    let movieId = document.querySelector('.js-movie-id-<%= movie.id %>').innerHTML;
    document.cookie = 'cinemat=' + movieId
  }

  document.querySelector('.js-touch-area-<%=  movie.id %>').addEventListener('pointermove', pointerMove)
</script>